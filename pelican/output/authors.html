<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <title>* Istrice * - Authors</title>

  <link rel="stylesheet" href="/theme/css/style.min.css?f0912086">   	<meta property="og:title" content="* Istrice *"/>
	<meta name="twitter:title" content="* Istrice *">
	<meta name="twitter:card" content="summary" />
	<meta property="og:url" content="" />
	<meta property="og:description" content="Low-tech Magazine refuses to assume that every problem has a high-tech solution. A simple, sensible, but nevertheless controversial message; high-tech has become the idol of our society.">
	<meta property="twitter:description" content="Low-tech Magazine refuses to assume that every problem has a high-tech solution. A simple, sensible, but nevertheless controversial message; high-tech has become the idol of our society.">
	<meta property="og:site_name" content="* Istrice *" />
	<meta property="og:article:author" content="moriati" />
	<meta property="og:image" content="https://solar.lowtechmagazine.com/extra/clear-day.png" />
	<meta name="twitter:image" content="https://solar.lowtechmagazine.com/extra/clear-day.png" >
         </head>

<body>
<div id="bat_data" class="bat_status">
  <a href="/power.html" title="Battery Capacity">
    <span id="charge_icon"></span>
    <span id="level">0%</span></a>
</div>
<div id="battery">
</div>
<main>
  <header class="top">
    <h1><a href="/">* Istrice *</a></h1>
    <div class="subtitle">
      <a href="/server.html">CPM+SO <svg class="icon" viewBox="0 0 500 500"><title>Solar</title><circle class="svg_fill" cx="248.48" cy="252.55" r="97.03"/><rect class="svg_fill" x="234.53" y="17.45" width="27.9" height="112.39"/><rect class="svg_fill" x="234.53" y="375.25" width="27.9" height="112.39"/><rect class="svg_fill" x="413.42" y="196.35" width="27.9" height="112.39" transform="translate(679.92 -174.83) rotate(90)"/><rect class="svg_fill" x="55.63" y="196.35" width="27.9" height="112.39" transform="translate(322.12 182.97) rotate(90)"/><rect class="svg_fill" x="361.03" y="69.85" width="27.9" height="112.39" transform="translate(198.96 -228.23) rotate(45)"/><rect class="svg_fill" x="108.03" y="322.85" width="27.9" height="112.39" transform="translate(303.75 24.77) rotate(45)"/><rect class="svg_fill" x="361.03" y="322.85" width="27.9" height="112.39" transform="translate(908.15 381.93) rotate(135)"/><rect class="svg_fill" x="108.03" y="69.85" width="27.9" height="112.39" transform="translate(297.35 128.93) rotate(135)"/></svg></a>
    </div>
    <nav id="menu">
      <div id="menu-s">
        menu
      </div>
      <ul id="menu-list">
        <li><a href="/notizen.html">Notizen</a></li>
        <li class="low"><a class="category" href="/capodimonte.html">Capodimonte</a></li>
        <li class="hig"><a class="category" href="/soriano.html">Soriano</a></li>
        <li class="obs"><a class="category" href="/kalender.html">Kalender</a></li>
        <li><a href="/archives.html">Archive</a></li>
      </ul>
    </nav>
    <!-- /#menu -->
  </header>
  <!-- /#banner -->

    <h1>Authors on * Istrice *</h1>

    <ul>        <li><a href="/author/jakob-janatka.html">Jakob Janatka</a> (8)</li>
    </ul>
  <footer id="content-info" class="body">
    <h2>
    <a href="/">* Istrice *</a>
  </h2>
    <div class="dashboard">
      <ul class="cols">
        <li>
          <h3>Server Stats</h3>
          <p>
          Location: Berlin<br>
          Time: <span id="time">Local Time</span><br>
          CPU: <span id="cpu">CPU Usage</span><br>
          Power Used: <span id="ram">RAM Usage</span><br>
          Uptime: <span id="uptime">up since</span><br>
          </p>
        </li>
        <li>
          <h3>Forecast</h3>
          <div class="forecast"></div>
        </li>
        <li>
          <h3>Info</h3>
          <p>
            <a href="/ueber.html">Über</a><br>
            <a href="/server.html">Server</a><br>
            <a href="/colophon.html">Colophon</a><br>
          </p>
          <p><a href="/privacy.html">Privacy Policy</a></p>
        </li>
        <li>
          <h3>Contact</h3>
          <p>
            &copy; Jakob Janatka<br>
          solar [at] lowtechmagazine [dot] com</p>
          <div class="social">
            <a href="/" type="application/rss+xml" rel="alternate"><svg viewBox="0 0 80 80" class="icon"><title>rss</title><circle cx="19.91" cy="58.23" r="6.86"/><path d="M67.89,65.72H55.7A41.86,41.86,0,0,0,13.89,23.91V11.73A54.06,54.06,0,0,1,67.89,65.72Z"/><path d="M48.93,65.72H36.75A22.88,22.88,0,0,0,13.89,42.87V30.68A35.08,35.08,0,0,1,48.93,65.72Z"/></svg></a>
            <a href="github[TODO]"><svg viewBox="0 0 80 80" class="icon"><title>facebook</title><path d="M57.16,16.42H50.87c-4.93,0-5.85,2.36-5.85,5.77v7.57H56.76L55.2,41.61H45V72H32.77V41.61H22.56V29.76H32.77V21C32.77,10.9,39,5.37,48,5.37a78.35,78.35,0,0,1,9.13.48Z"/></svg></a>
            <a href="mailto:solar@lowtechmagazine.com[TODO]"><svg viewBox="0 0 80 80" class="icon"><title>email</title><path d="M4.95,13.14v55H74.33v-55Zm54.34,8.12L39.64,39.74,20,21.26ZM13.07,60V25.91l26.56,25,26.57-25V60Z"/></svg></a>
         </div>
          <!-- /.social -->
        </li>
      </ul>
    </div>
  </footer>
<!-- /#contentinfo -->
</main>

<script>
var url = "https://stachelschwein.eu/api/stats.json";
var data;
var general_stats = [];

var weather_data = ["today", "tomorrow", "day_after_t"];
var weather_days = ["today", "tomorrow", "day after tomorrow"];
var forecast = "";

var battery_icon = '<svg class="icon" viewBox="0 0 500 500"><title>Battery used</title><g id="bat_used" data-name="Layer 5"><title>Battery used</title><polygon class="svg_stroke" points="327.01 127.16 327.01 47.31 172.99 47.31 172.99 127.16 115.52 127.16 115.52 452.69 384.48 452.69 384.48 127.16 327.01 127.16"/><polygon class="svg_fill" points="357.64 408.86 158.26 408.86 158.26 209.49 357.64 408.86"/></svg>';
var solar_icon = '<svg class="icon" viewBox="0 0 500 500"><title>Solar used, battery charging</title><circle class="svg_fill" cx="248.48" cy="252.55" r="97.03"/><rect class="svg_fill" x="234.53" y="17.45" width="27.9" height="112.39"/><rect class="svg_fill" x="234.53" y="375.25" width="27.9" height="112.39"/><rect class="svg_fill" x="413.42" y="196.35" width="27.9" height="112.39" transform="translate(679.92 -174.83) rotate(90)"/><rect class="svg_fill" x="55.63" y="196.35" width="27.9" height="112.39" transform="translate(322.12 182.97) rotate(90)"/><rect class="svg_fill" x="361.03" y="69.85" width="27.9" height="112.39" transform="translate(198.96 -228.23) rotate(45)"/><rect class="svg_fill" x="108.03" y="322.85" width="27.9" height="112.39" transform="translate(303.75 24.77) rotate(45)"/><rect class="svg_fill" x="361.03" y="322.85" width="27.9" height="112.39" transform="translate(908.15 381.93) rotate(135)"/><rect class="svg_fill" x="108.03" y="69.85" width="27.9" height="112.39" transform="translate(297.35 128.93) rotate(135)"/></svg>';

function getServerData() {
    var request = new XMLHttpRequest();

    request.open('GET', url, true);
    request.onload = function() {
        if (request.readyState == 4 && request.status == 200) {
            data = JSON.parse(request.responseText);

            //set categories and descriptors for server stats
            solar_stats = [
                ["Power usage from solar", data.ac_power],
                ["Current draw from solar", data.ac_current],
                ["Voltage from solar", data.ac_voltage]
            ];
            battery_stats = [
                ["Power usage from battery", data.bat_power],
                ["Current draw from battery", data.bat_current],
                ["Battery voltage", data.bat_voltage]
            ];
            load = (data.load_15 / 2) * 100 + '%';
            general_stats = [
                ["Local time", data.local_time],
                ["Uptime", data.uptime],
                ["CPU temperature", data.temperature + "°C"],
                ["CPU load average *", load],
                ["Ram Usage", data.ram],
            ];

            for (i = 0; i < weather_data.length; i++) {
                var key = weather_data[i]; //for each day
                var icon_name = key + "_icon"; //today_icon, etc
                var text = data[key]; //weather description

                var weather_icon;
                //use cloud icon for all overcast weather
                if(weather_ignore.includes(data[icon_name])){
                  weather_icon = "cloudy";
                }else{
                  weather_icon = data[icon_name];
                }
                forecast += '<span class="weather_day" id="' + key + '" title="' + text + '">' + weather_days[i] + '</span><span class="weather_icon ' + weather_icon +'"> </span><span class="weather_text"> ' + text + '</span>';
            }

            var weatherinfo = document.querySelectorAll('.forecast');
            [].forEach.call(weatherinfo, function(target) {
                target.innerHTML = forecast;
            });

            var data_content = [
                ['level', level],
                ['dashboard_level', level],
                ['power', power],
                ['charge_icon', charge_icon],
                ['charge_text', bat_text],
                ['uptime', data.uptime],
                ['time', data.local_time]
            ];
            for (i = 0; i < data_content.length; i++) {
                document.getElementById(data_content[i][0]).innerHTML = data_content[i][1];
            }
        }
        if (window.location.href.indexOf('power.html') > -1) {
          populateData();
        }
    };
    request.send();
}
getServerData();

//mobile menu toggle
document.getElementById('menu-s').addEventListener('click', function() {
    document.getElementById('menu-list').classList.toggle("show");
});

//Remove TYPOGRIFY NBSP;s in headers
var headings = document.querySelectorAll('h1');
[].forEach.call(headings, function(target) {
    target.innerHTML = target.innerHTML.replace(/&nbsp;/g, ' ');
});

function populateData() {
    var stats = [];
    function pushData(arr) {
        for (i = 0; i < arr.length; i++) {
            stats.push("<dt>" + arr[i][0] + "</dt><dd>" + arr[i][1] + "</dd>");
        }
    }
    pushData(general_stats);
    if (data.ac_used == "no") {
        pushData(battery_stats);
    } else {
        pushData(solar_stats);
    }
    var dl = document.createElement('dl');
    dl.classList.add('server');
    dl.innerHTML = stats.join("");
    document.getElementById('data').appendChild(dl);
}

</script>
</body>

</html>